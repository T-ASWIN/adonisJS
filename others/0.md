1.app.ts-->allowMethodSpoofing:true

<form action="{{route('home.index'),{},{qs:{_method:'DELETE'}})}}" method="POST">

2.form

<form action="{{route('home.index'),{},{qs:{_method:'DELETE'} method='POST' }}}>

{{csrfField}}

<label name="email" >Email</label>
<input type="email" name="email" />

<label name="password" >Password</label>
<input type="password" name="password" />

<button type="submit" >Login</button>

</form>




3.async toggle({request,prams,auth}:HttpContext){
const {movieId} =params
const user= auth.user!

const toggle= await Watchlist.query().related('user').where({movieId,userId}).first()

if(toggle){
await watchlist.delete()
else{
await watchlist.create({userId,movieId})
}

return response.redirectTo().back()


4.card component toggle
1. props has ({}) braket
2. need to use comma
3. need to use '' for UI values
4.

$props({
title:'',
poster:'',
toggleUrl:'',
inwatchlist:false,
})

<div>
<img src="{poster}" alt="{title}"/>
<h2>{{title}}</h2>

<form action="{toggleUrl}}" method="POST" >
{{csrfField}}
<button type="submit" >{{@if(inwatchlist)?'in watch list':'move to watch list'</button>
</form>

<div>


@!components.card()
@each(movie in movies)
title={movie.title}
poster={movie.poster}
toggleUrl={movie.url}
inwatchlist={movie.inwatch}


@endeach

5.search,status,sort, and pagination 
add page
name filter -->filters
everyfilters in if statement
`%${filtrs.search}%`

async index({view,params}:HttpContext){
const page = request.input('page',1)

const filters={
 search:request.input('search'),
 status:request.input('status'),
 sort:request.input('sort'),
}

if(filters.search){
const moviefilter=await Movie.query().

if(filters.search){
moviefilter.whereILike('title',`%${filters.search}%`)
}

if(filters.status){
moviefilter.where('statusId',filters.status)
}

const sortMap ={
'title_asc':['title','asc'],
'title-desc':column='title',filter='desc'
}

if(moviefilter || ){
const {column, filter}= filter.sort
moviefilter.orderBy(column,filter)
}

moviefilter.baseUrl(makeUrl('movies.index'))

moviefilter.paginate

}
